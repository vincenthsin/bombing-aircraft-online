services:
  # Backend service - Docker-based deployment with SQLite database
  - type: web
    name: bombing-aircraft-backend
    env: docker
    region: singapore
    plan: free
    # Docker image from GitHub Container Registry
    # Image will be built and pushed by GitHub Actions
    # Format: ghcr.io/<github-username>/bombing-aircraft-backend:latest
    dockerfilePath: ./Dockerfile.backend
    dockerContext: .
    # Auto-deploy disabled - controlled by GitHub Actions
    autoDeploy: false
    # Persistent disk for SQLite database
    disk:
      name: backend-data
      mountPath: /app/data
      sizeGB: 1
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: CORS_ORIGIN
        value: "*"
      - key: JWT_SECRET
        generateValue: true
      - key: DB_PATH
        value: /app/data/database.sqlite

# Frontend is deployed separately to Vercel
# See CI/CD workflow for frontend deployment configuration